{"ast":null,"code":"var _jsxFileName = \"/Users/jaredricardo/Desktop/apps/Stock Screener/src/components/Graph.js\";\nimport React, { Component } from 'react';\nimport { dailyData } from '../api';\nimport { historicalDataThirty } from '../api';\nimport { historicalDataNinety } from '../api';\nimport { Line } from 'react-chartjs-2';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Container from 'react-bootstrap/Container';\n\nfunction newChartConfig(labels, data, activeTicker, graphedDaysFunc) {\n  return {\n    labels: labels,\n    datasets: [{\n      label: graphedDaysFunc,\n      fill: false,\n      lineTension: 0,\n      backgroundColor: 'rgba(75,192,192,0.4)',\n      borderColor: '#58c43b',\n      borderCapStyle: 'butt',\n      borderDash: [],\n      borderDashOffset: 0.0,\n      borderJoinStyle: 'miter',\n      pointBorderColor: 'white',\n      pointBackgroundColor: '#fff',\n      pointBorderWidth: 1,\n      pointHoverRadius: 5,\n      pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n      pointHoverBorderColor: 'rgba(220,220,220,1)',\n      pointHoverBorderWidth: 2,\n      pointRadius: 1,\n      pointHitRadius: 10,\n      data: data\n    }]\n  };\n}\n\nexport class Graph extends Component {\n  constructor(props) {\n    super(props);\n\n    this.clickHandlers = e => {\n      if (this.props.activeTicker === undefined) {\n        alert(\"No active ticker seleceted\");\n      } else if (e.target.value === \"one\") {\n        return this.handleClickDaily();\n      } else if (e.target.value === \"thirty\") {\n        return this.handleClickThirty();\n      } else if (e.target.value === \"ninety\") {\n        return this.handleClickNinety();\n      }\n    };\n\n    this.handleClickDaily = async () => {\n      this.setState({\n        graphedDays: 1,\n        dataPointsNeeded: 100\n      });\n    };\n\n    this.handleClickThirty = async () => {\n      this.setState({\n        graphedDays: 30,\n        dataPointsNeeded: 90\n      });\n    };\n\n    this.handleClickNinety = async () => {\n      this.setState({\n        graphedDays: 90,\n        dataPointsNeeded: 90\n      });\n    };\n\n    this.updateData = async refresh => {\n      if (this.props.activeTicker === undefined) return; // same as return null \n\n      if (this.state.graphedDays === 1) {\n        if (this.state.dailyXData !== null && !refresh) return;\n        const data = await dailyData(this.props.activeTicker);\n        const parsed = data[\"Time Series (5min)\"];\n        const yAxisArr = Object.values(parsed).map(e => +e[\"3. low\"]);\n        const dailyDataArr = yAxisArr.splice(0, yAxisArr.length).reverse();\n        const dailyxAxisData = Object.keys(parsed).map(e => e.slice(10, parsed.length)).reverse();\n        this.setState({\n          dailyYData: dailyDataArr,\n          dailyXData: dailyxAxisData\n        });\n      } else if (this.state.graphedDays === 30) {\n        if (this.state.monthlyXData !== null && !refresh) return;\n        const data = await historicalDataThirty(this.props.activeTicker);\n        const parsed = data[\"Time Series (Daily)\"];\n        const yAxisArr = Object.values(parsed).map(e => +e[\"4. close\"]);\n        const oneMonthDataPoints = yAxisArr.splice(0, 30).reverse();\n        const monthlyxAxisData = Object.keys(parsed).map(e => e.slice(5, parsed.length)).splice(0, 30).reverse();\n        this.setState({\n          monthlyYData: oneMonthDataPoints,\n          monthlyXData: monthlyxAxisData\n        });\n      } else if (this.state.graphedDays === 90) {\n        if (this.state.threeMonthXData !== null && !refresh) return;\n        const data = await historicalDataNinety(this.props.activeTicker);\n        const parsed = data[\"Time Series (Daily)\"];\n        const yAxisArr = Object.values(parsed).map(e => +e[\"4. close\"]);\n        const threeMonthDataPoints = yAxisArr.splice(0, 90).reverse();\n        const threeMonthxAxisData = Object.keys(parsed).map(e => e.slice(5, parsed.length)).splice(0, 90).reverse();\n        this.setState({\n          threeMonthYData: threeMonthDataPoints,\n          threeMonthXData: threeMonthxAxisData\n        });\n      }\n    };\n\n    this.state = {\n      graphedDays: null,\n      //initial state is 30 day graph \n      dataPointsNeeded: null,\n      dailyXData: null,\n      monthlyXData: null,\n      threeMonthXData: null,\n      dailyYData: null,\n      monthlyYData: null,\n      threeMonthYData: null\n    };\n  }\n\n  async componentDidMount() {\n    this.updateData();\n  }\n\n  async componentDidUpdate(prevProps, prevState) {\n    if (prevProps.activeTicker !== this.props.activeTicker || prevState.graphedDays !== this.state.graphedDays) {\n      this.updateData(prevProps.activeTicker !== this.props.activeTicker);\n    }\n  }\n\n  render() {\n    const activeTicker = this.props.activeTicker;\n    let X = this.state.dailyXData;\n    let Y = this.state.dailyYData;\n\n    if (this.state.graphedDays === 30) {\n      X = this.state.monthlyXData;\n      Y = this.state.monthlyYData;\n    } else if (this.state.graphedDays === 90) {\n      X = this.state.threeMonthXData;\n      Y = this.state.threeMonthYData;\n    }\n\n    const graphLabel = () => {\n      if (this.state.graphedDays === null || this.props.activeTicker === undefined) {\n        return \"No active ticker\";\n      } else {\n        return activeTicker.toUpperCase() + ' ' + this.state.graphedDays + ' day graph';\n      }\n    };\n\n    const config = newChartConfig(X, Y, activeTicker, graphLabel());\n    const options = {\n      maintainAspectRatio: false,\n      responsive: true\n    };\n    const height = 350;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-container\",\n      id: \"graph\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      fluid: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Line, {\n      data: config,\n      options: options,\n      height: height,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"graph-btn-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"graph-btns\",\n      value: \"one\",\n      onClick: this.clickHandlers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 29\n      }\n    }, \"1 day\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"graph-btns\",\n      value: \"thirty\",\n      onClick: this.clickHandlers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 29\n      }\n    }, \" 30 day \"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"graph-btns\",\n      value: \"ninety\",\n      onClick: this.clickHandlers,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 29\n      }\n    }, \" 90 day\"))));\n  }\n\n}\nexport default Graph;","map":{"version":3,"sources":["/Users/jaredricardo/Desktop/apps/Stock Screener/src/components/Graph.js"],"names":["React","Component","dailyData","historicalDataThirty","historicalDataNinety","Line","Container","newChartConfig","labels","data","activeTicker","graphedDaysFunc","datasets","label","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","Graph","constructor","props","clickHandlers","e","undefined","alert","target","value","handleClickDaily","handleClickThirty","handleClickNinety","setState","graphedDays","dataPointsNeeded","updateData","refresh","state","dailyXData","parsed","yAxisArr","Object","values","map","dailyDataArr","splice","length","reverse","dailyxAxisData","keys","slice","dailyYData","monthlyXData","oneMonthDataPoints","monthlyxAxisData","monthlyYData","threeMonthXData","threeMonthDataPoints","threeMonthxAxisData","threeMonthYData","componentDidMount","componentDidUpdate","prevProps","prevState","render","X","Y","graphLabel","toUpperCase","config","options","maintainAspectRatio","responsive","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { dailyData } from '../api'\nimport { historicalDataThirty } from '../api'\nimport { historicalDataNinety} from '../api'\nimport { Line } from 'react-chartjs-2'\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Container  from 'react-bootstrap/Container'\n\n\nfunction newChartConfig(labels, data, activeTicker, graphedDaysFunc) {\n    return {\n        labels: labels, \n        datasets: [\n          {\n            label: graphedDaysFunc,\n            fill: false,\n            lineTension: 0,\n            backgroundColor: 'rgba(75,192,192,0.4)',\n            borderColor: '#58c43b',\n            borderCapStyle: 'butt',\n            borderDash: [],\n            borderDashOffset: 0.0,\n            borderJoinStyle: 'miter',\n            pointBorderColor: 'white',\n            pointBackgroundColor: '#fff',\n            pointBorderWidth: 1,\n            pointHoverRadius: 5,\n            pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n            pointHoverBorderColor: 'rgba(220,220,220,1)',\n            pointHoverBorderWidth: 2,\n            pointRadius: 1,\n            pointHitRadius: 10,\n            data: data\n          }\n        ] \n    }\n}\n\nexport class Graph extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            graphedDays: null, //initial state is 30 day graph \n            dataPointsNeeded: null,\n            dailyXData: null,\n            monthlyXData: null,\n            threeMonthXData: null,\n            dailyYData: null,\n            monthlyYData: null,\n            threeMonthYData: null\n        }\n    }\n\n\n    clickHandlers = (e) => {\n        if (this.props.activeTicker === undefined) {\n            alert(\"No active ticker seleceted\")\n        } else if(e.target.value === \"one\") {\n            return this.handleClickDaily()\n        } else if (e.target.value === \"thirty\") {\n            return this.handleClickThirty()\n        } else if(e.target.value === \"ninety\") {\n           return this.handleClickNinety()\n        }\n    }\n\n    handleClickDaily = async () => {\n        this.setState({\n            graphedDays:1,\n            dataPointsNeeded: 100 \n        }) \n    }\n    handleClickThirty = async () => {\n\n        this.setState({\n            graphedDays: 30,\n            dataPointsNeeded: 90\n        })\n    }\n    handleClickNinety = async () => {\n        this.setState({\n            graphedDays: 90 ,\n            dataPointsNeeded: 90\n        })\n    }\n\n\n    updateData = async (refresh) => {\n        if (this.props.activeTicker === undefined) return // same as return null \n        \n        if(this.state.graphedDays === 1 ) {\n\n            if(this.state.dailyXData !== null && !refresh) return \n\n            const data = await dailyData(this.props.activeTicker)\n            const parsed = data[\"Time Series (5min)\"]\n            const yAxisArr = Object.values(parsed).map((e) => +e[\"3. low\"])\n            const dailyDataArr = yAxisArr.splice(0, yAxisArr.length).reverse()\n            const dailyxAxisData = Object.keys(parsed).map(e => e.slice(10, parsed.length)).reverse()\n            this.setState({\n                dailyYData:dailyDataArr,\n                dailyXData: dailyxAxisData                \n            })\n        } else if (this.state.graphedDays === 30) {\n\n            if(this.state.monthlyXData !== null && !refresh) return \n\n            const data = await historicalDataThirty(this.props.activeTicker)\n            const parsed = data[\"Time Series (Daily)\"]\n            const yAxisArr = Object.values(parsed).map((e) => +e[\"4. close\"])\n            const oneMonthDataPoints = yAxisArr.splice(0, 30).reverse()\n            const monthlyxAxisData = Object.keys(parsed).map(e => e.slice(5, parsed.length)).splice(0, 30).reverse()\n\n            this.setState({\n                monthlyYData: oneMonthDataPoints,\n                monthlyXData: monthlyxAxisData\n            })\n        } else if (this.state.graphedDays === 90) {\n\n            if(this.state.threeMonthXData !== null && !refresh) return \n\n            const data = await historicalDataNinety(this.props.activeTicker)\n            const parsed = data[\"Time Series (Daily)\"]\n            const yAxisArr = Object.values(parsed).map((e) => +e[\"4. close\"])\n            const threeMonthDataPoints = yAxisArr.splice(0, 90).reverse()\n            const threeMonthxAxisData = Object.keys(parsed).map(e => e.slice(5, parsed.length)).splice(0, 90).reverse()\n\n            this.setState({\n                threeMonthYData: threeMonthDataPoints,\n                threeMonthXData: threeMonthxAxisData\n            })\n        }\n    }\n\n    async componentDidMount() {\n        this.updateData()\n    }\n    \n    async componentDidUpdate(prevProps, prevState) {\n        if (prevProps.activeTicker !== this.props.activeTicker || \n            prevState.graphedDays !== this.state.graphedDays) {\n            this.updateData(prevProps.activeTicker !== this.props.activeTicker)\n        }\n    }\n\n    render() {\n\n        const activeTicker = this.props.activeTicker\n\n        let X = this.state.dailyXData\n        let Y = this.state.dailyYData\n\n        if(this.state.graphedDays === 30) {\n            X = this.state.monthlyXData\n            Y = this.state.monthlyYData\n        } else if ( this.state.graphedDays === 90) {\n            X = this.state.threeMonthXData\n            Y = this.state.threeMonthYData\n        }\n         \n        const graphLabel = () => {\n            if(this.state.graphedDays === null || this.props.activeTicker === undefined) {\n                return \"No active ticker\"\n            } else {\n                return activeTicker.toUpperCase() + ' ' + this.state.graphedDays + ' day graph'\n            }\n        }\n       \n        const config = newChartConfig(X, Y, activeTicker, graphLabel())\n        const options = {\n            maintainAspectRatio: false,\n            responsive: true\n        }\n\n        const height = 350\n\n        return (\n            <div className=\"content-container\" id=\"graph\">\n\n                <Container fluid> \n                        <Line   \n                            data=       {config} \n                            options=    {options} \n                            height={height}\n                        />\n\n                        <div className=\"graph-btn-container\"> \n                            <button className=\"graph-btns\" value=\"one\"      onClick={this.clickHandlers}>1 day</button>\n                            <button className=\"graph-btns\" value=\"thirty\"   onClick={this.clickHandlers}> 30 day </button>\n                            <button className=\"graph-btns\" value=\"ninety\"   onClick={this.clickHandlers}> 90 day</button>\n                        </div>\n                </Container>\n            </div>\n        )\n    }\n}\n\nexport default Graph"]},"metadata":{},"sourceType":"module"}