{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jaredricardo/Desktop/apps/stock screener/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jaredricardo/Desktop/apps/stock screener/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/jaredricardo/Desktop/apps/stock screener/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jaredricardo/Desktop/apps/stock screener/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/jaredricardo/Desktop/apps/stock screener/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/jaredricardo/Desktop/apps/stock screener/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{dailyData}from'../api';import{historicalDataThirty}from'../api';import{historicalDataNinety}from'../api';import{Line}from'react-chartjs-2';import'bootstrap/dist/css/bootstrap.min.css';import Container from'react-bootstrap/Container';function newChartConfig(labels,data,activeTicker,graphedDaysFunc){return{labels:labels,datasets:[{label:graphedDaysFunc,fill:false,lineTension:0,backgroundColor:'rgba(75,192,192,0.4)',borderColor:'#58c43b',borderCapStyle:'butt',borderDash:[],borderDashOffset:0.0,borderJoinStyle:'miter',pointBorderColor:'white',pointBackgroundColor:'#fff',pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:'rgba(75,192,192,1)',pointHoverBorderColor:'rgba(220,220,220,1)',pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:data}]};}export var Graph=/*#__PURE__*/function(_Component){_inherits(Graph,_Component);var _super=_createSuper(Graph);function Graph(props){var _this;_classCallCheck(this,Graph);_this=_super.call(this,props);_this.clickHandlers=function(e){if(_this.props.activeTicker===undefined){alert(\"No active ticker seleceted\");}else if(e.target.value===\"one\"){return _this.handleClickDaily();}else if(e.target.value===\"thirty\"){return _this.handleClickThirty();}else if(e.target.value===\"ninety\"){return _this.handleClickNinety();}};_this.handleClickDaily=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({graphedDays:1,dataPointsNeeded:100});case 1:case\"end\":return _context.stop();}}},_callee);}));_this.handleClickThirty=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({graphedDays:30,dataPointsNeeded:90});case 1:case\"end\":return _context2.stop();}}},_callee2);}));_this.handleClickNinety=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({graphedDays:90,dataPointsNeeded:90});case 1:case\"end\":return _context3.stop();}}},_callee3);}));_this.updateData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(refresh){var data,parsed,yAxisArr,dailyDataArr,dailyxAxisData,_data,_parsed,_yAxisArr,oneMonthDataPoints,monthlyxAxisData,_data2,_parsed2,_yAxisArr2,threeMonthDataPoints,threeMonthxAxisData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(_this.props.activeTicker===undefined)){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:if(!(_this.state.graphedDays===1)){_context4.next=15;break;}if(!(_this.state.dailyXData!==null&&!refresh)){_context4.next=5;break;}return _context4.abrupt(\"return\");case 5:_context4.next=7;return dailyData(_this.props.activeTicker);case 7:data=_context4.sent;parsed=data[\"Time Series (5min)\"];yAxisArr=Object.values(parsed).map(function(e){return+e[\"3. low\"];});dailyDataArr=yAxisArr.splice(0,yAxisArr.length).reverse();dailyxAxisData=Object.keys(parsed).map(function(e){return e.slice(10,parsed.length);}).reverse();_this.setState({dailyYData:dailyDataArr,dailyXData:dailyxAxisData});_context4.next=39;break;case 15:if(!(_this.state.graphedDays===30)){_context4.next=28;break;}if(!(_this.state.monthlyXData!==null&&!refresh)){_context4.next=18;break;}return _context4.abrupt(\"return\");case 18:_context4.next=20;return historicalDataThirty(_this.props.activeTicker);case 20:_data=_context4.sent;_parsed=_data[\"Time Series (Daily)\"];_yAxisArr=Object.values(_parsed).map(function(e){return+e[\"4. close\"];});oneMonthDataPoints=_yAxisArr.splice(0,30).reverse();monthlyxAxisData=Object.keys(_parsed).map(function(e){return e.slice(5,_parsed.length);}).splice(0,30).reverse();_this.setState({monthlyYData:oneMonthDataPoints,monthlyXData:monthlyxAxisData});_context4.next=39;break;case 28:if(!(_this.state.graphedDays===90)){_context4.next=39;break;}if(!(_this.state.threeMonthXData!==null&&!refresh)){_context4.next=31;break;}return _context4.abrupt(\"return\");case 31:_context4.next=33;return historicalDataNinety(_this.props.activeTicker);case 33:_data2=_context4.sent;_parsed2=_data2[\"Time Series (Daily)\"];_yAxisArr2=Object.values(_parsed2).map(function(e){return+e[\"4. close\"];});threeMonthDataPoints=_yAxisArr2.splice(0,90).reverse();threeMonthxAxisData=Object.keys(_parsed2).map(function(e){return e.slice(5,_parsed2.length);}).splice(0,90).reverse();_this.setState({threeMonthYData:threeMonthDataPoints,threeMonthXData:threeMonthxAxisData});case 39:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x){return _ref4.apply(this,arguments);};}();_this.state={graphedDays:30,//initial state is 30 day graph \ndataPointsNeeded:null,dailyXData:null,monthlyXData:null,threeMonthXData:null,dailyYData:null,monthlyYData:null,threeMonthYData:null};return _this;}_createClass(Graph,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:this.updateData();case 1:case\"end\":return _context5.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(prevProps,prevState){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(prevProps.activeTicker!==this.props.activeTicker||prevState.graphedDays!==this.state.graphedDays){this.updateData(prevProps.activeTicker!==this.props.activeTicker);}case 1:case\"end\":return _context6.stop();}}},_callee6,this);}));function componentDidUpdate(_x2,_x3){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()},{key:\"render\",value:function render(){var _this2=this;var activeTicker=this.props.activeTicker;var X=this.state.dailyXData;var Y=this.state.dailyYData;if(this.state.graphedDays===30){X=this.state.monthlyXData;Y=this.state.monthlyYData;}else if(this.state.graphedDays===90){X=this.state.threeMonthXData;Y=this.state.threeMonthYData;}var graphLabel=function graphLabel(){if(_this2.state.graphedDays===null||_this2.props.activeTicker===undefined){return\"No active ticker\";}else{return activeTicker.toUpperCase()+' '+_this2.state.graphedDays+' day graph';}};var config=newChartConfig(X,Y,activeTicker,graphLabel());var options={maintainAspectRatio:false,responsive:true};var graphHeight=350;return/*#__PURE__*/React.createElement(\"div\",{className:\"content-container\",id:\"graph\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Line,{data:config,options:options,height:graphHeight}),/*#__PURE__*/React.createElement(\"div\",{className:\"graph-btn-container\"},/*#__PURE__*/React.createElement(\"button\",{className:\"graph-btns\",value:\"one\",onClick:this.clickHandlers},\"1 day\"),/*#__PURE__*/React.createElement(\"button\",{className:\"graph-btns\",value:\"thirty\",onClick:this.clickHandlers},\" 30 day \"),/*#__PURE__*/React.createElement(\"button\",{className:\"graph-btns\",value:\"ninety\",onClick:this.clickHandlers},\" 90 day\"))));}}]);return Graph;}(Component);export default Graph;","map":{"version":3,"sources":["/Users/jaredricardo/Desktop/apps/stock screener/src/components/Graph.js"],"names":["React","Component","dailyData","historicalDataThirty","historicalDataNinety","Line","Container","newChartConfig","labels","data","activeTicker","graphedDaysFunc","datasets","label","fill","lineTension","backgroundColor","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","pointBorderColor","pointBackgroundColor","pointBorderWidth","pointHoverRadius","pointHoverBackgroundColor","pointHoverBorderColor","pointHoverBorderWidth","pointRadius","pointHitRadius","Graph","props","clickHandlers","e","undefined","alert","target","value","handleClickDaily","handleClickThirty","handleClickNinety","setState","graphedDays","dataPointsNeeded","updateData","refresh","state","dailyXData","parsed","yAxisArr","Object","values","map","dailyDataArr","splice","length","reverse","dailyxAxisData","keys","slice","dailyYData","monthlyXData","oneMonthDataPoints","monthlyxAxisData","monthlyYData","threeMonthXData","threeMonthDataPoints","threeMonthxAxisData","threeMonthYData","prevProps","prevState","X","Y","graphLabel","toUpperCase","config","options","maintainAspectRatio","responsive","graphHeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { dailyData } from '../api'\nimport { historicalDataThirty } from '../api'\nimport { historicalDataNinety} from '../api'\nimport { Line } from 'react-chartjs-2'\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport Container  from 'react-bootstrap/Container'\n\n\nfunction newChartConfig(labels, data, activeTicker, graphedDaysFunc) {\n    return {\n        labels: labels, \n        datasets: [\n          {\n            label: graphedDaysFunc,\n            fill: false,\n            lineTension: 0,\n            backgroundColor: 'rgba(75,192,192,0.4)',\n            borderColor: '#58c43b',\n            borderCapStyle: 'butt',\n            borderDash: [],\n            borderDashOffset: 0.0,\n            borderJoinStyle: 'miter',\n            pointBorderColor: 'white',\n            pointBackgroundColor: '#fff',\n            pointBorderWidth: 1,\n            pointHoverRadius: 5,\n            pointHoverBackgroundColor: 'rgba(75,192,192,1)',\n            pointHoverBorderColor: 'rgba(220,220,220,1)',\n            pointHoverBorderWidth: 2,\n            pointRadius: 1,\n            pointHitRadius: 10,\n            data: data\n          }\n        ] \n    }\n}\n\nexport class Graph extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            graphedDays: 30, //initial state is 30 day graph \n            dataPointsNeeded: null,\n            dailyXData: null,\n            monthlyXData: null,\n            threeMonthXData: null,\n            dailyYData: null,\n            monthlyYData: null,\n            threeMonthYData: null\n        }\n    }\n\n\n    clickHandlers = (e) => {\n        if (this.props.activeTicker === undefined) {\n            alert(\"No active ticker seleceted\")\n        } else if(e.target.value === \"one\") {\n            return this.handleClickDaily()\n        } else if (e.target.value === \"thirty\") {\n            return this.handleClickThirty()\n        } else if(e.target.value === \"ninety\") {\n           return this.handleClickNinety()\n        }\n    }\n\n    handleClickDaily = async () => {\n        this.setState({\n            graphedDays:1,\n            dataPointsNeeded: 100 \n        }) \n    }\n    handleClickThirty = async () => {\n\n        this.setState({\n            graphedDays: 30,\n            dataPointsNeeded: 90\n        })\n    }\n    handleClickNinety = async () => {\n        this.setState({\n            graphedDays: 90 ,\n            dataPointsNeeded: 90\n        })\n    }\n\n\n    updateData = async (refresh) => {\n        if (this.props.activeTicker === undefined) return // same as return null \n        \n        if(this.state.graphedDays === 1 ) {\n\n            if(this.state.dailyXData !== null && !refresh) return \n\n            const data = await dailyData(this.props.activeTicker)\n            const parsed = data[\"Time Series (5min)\"]\n            const yAxisArr = Object.values(parsed).map((e) => +e[\"3. low\"])\n            const dailyDataArr = yAxisArr.splice(0, yAxisArr.length).reverse()\n            const dailyxAxisData = Object.keys(parsed).map(e => e.slice(10, parsed.length)).reverse()\n            this.setState({\n                dailyYData:dailyDataArr,\n                dailyXData: dailyxAxisData                \n            })\n        } else if (this.state.graphedDays === 30) {\n\n            if(this.state.monthlyXData !== null && !refresh) return \n\n            const data = await historicalDataThirty(this.props.activeTicker)\n            const parsed = data[\"Time Series (Daily)\"]\n            const yAxisArr = Object.values(parsed).map((e) => +e[\"4. close\"])\n            const oneMonthDataPoints = yAxisArr.splice(0, 30).reverse()\n            const monthlyxAxisData = Object.keys(parsed).map(e => e.slice(5, parsed.length)).splice(0, 30).reverse()\n\n            this.setState({\n                monthlyYData: oneMonthDataPoints,\n                monthlyXData: monthlyxAxisData\n            })\n        } else if (this.state.graphedDays === 90) {\n\n            if(this.state.threeMonthXData !== null && !refresh) return \n\n            const data = await historicalDataNinety(this.props.activeTicker)\n            const parsed = data[\"Time Series (Daily)\"]\n            const yAxisArr = Object.values(parsed).map((e) => +e[\"4. close\"])\n            const threeMonthDataPoints = yAxisArr.splice(0, 90).reverse()\n            const threeMonthxAxisData = Object.keys(parsed).map(e => e.slice(5, parsed.length)).splice(0, 90).reverse()\n\n            this.setState({\n                threeMonthYData: threeMonthDataPoints,\n                threeMonthXData: threeMonthxAxisData\n            })\n        }\n    }\n\n    async componentDidMount() {\n        this.updateData()\n    }\n    \n    async componentDidUpdate(prevProps, prevState) {\n        if (prevProps.activeTicker !== this.props.activeTicker || \n            prevState.graphedDays !== this.state.graphedDays) {\n            this.updateData(prevProps.activeTicker !== this.props.activeTicker)\n        }\n    }\n\n    render() {\n\n        const activeTicker = this.props.activeTicker\n\n        let X = this.state.dailyXData\n        let Y = this.state.dailyYData\n\n        if(this.state.graphedDays === 30) {\n            X = this.state.monthlyXData\n            Y = this.state.monthlyYData\n        } else if ( this.state.graphedDays === 90) {\n            X = this.state.threeMonthXData\n            Y = this.state.threeMonthYData\n        }\n         \n        const graphLabel = () => {\n            if(this.state.graphedDays === null || this.props.activeTicker === undefined) {\n                return \"No active ticker\"\n            } else {\n                return activeTicker.toUpperCase() + ' ' + this.state.graphedDays + ' day graph'\n            }\n        }\n       \n        const config = newChartConfig(X, Y, activeTicker, graphLabel())\n        const options = {\n            maintainAspectRatio: false,\n            responsive: true\n        }\n\n        const graphHeight = 350\n\n        return (\n            <div className=\"content-container\" id=\"graph\">\n\n                <Container fluid> \n                        <Line   \n                            data=       {config} \n                            options=    {options} \n                            height= {graphHeight}\n                        />\n\n                        <div className=\"graph-btn-container\"> \n                            <button className=\"graph-btns\" value=\"one\"      onClick={this.clickHandlers}>1 day</button>\n                            <button className=\"graph-btns\" value=\"thirty\"   onClick={this.clickHandlers}> 30 day </button>\n                            <button className=\"graph-btns\" value=\"ninety\"   onClick={this.clickHandlers}> 90 day</button>\n                        </div>\n                </Container>\n            </div>\n        )\n    }\n}\n\nexport default Graph"]},"metadata":{},"sourceType":"module"}